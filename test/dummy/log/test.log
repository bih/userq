  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "user_queue" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar(255), "expires_at" datetime, "data" text, "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.3ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (1.2ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('1387736448')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
---------------------
UserqTest: test_truth
---------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
-----------------------------------
UserqTest: test_if_module_available
-----------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserqTest: test_if_core_module_is_available
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UserqTest: test_if_queue_module_is_available
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
-------------------------------------------
UserqTest: test_if_core_module_is_available
-------------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------
UserqTest: test_if_queue_module_is_available
--------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateUserQueues (1387763867)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "user_queues" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar(255), "expires_at" datetime, "data" text, "context" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "1387763867"]]
  [1m[36m (6.9ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.483736')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "hhr7xcjkw6tqsm4hdwa4ci5t"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.515683')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hhr7xcjkw6tqsm4hdwa4ci5t'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hhr7xcjkw6tqsm4hdwa4ci5t' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.520690')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "yfqv21i7ccs0rvbex2ehctiv"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.522983')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yfqv21i7ccs0rvbex2ehctiv'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yfqv21i7ccs0rvbex2ehctiv' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.526604')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "gviy96spezrg83nse8ad9ail"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.529498')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'gviy96spezrg83nse8ad9ail'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'gviy96spezrg83nse8ad9ail' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.530662')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "hno49fu7mjkz1ctzzip3zevp"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.532985')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hno49fu7mjkz1ctzzip3zevp'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hno49fu7mjkz1ctzzip3zevp' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.534132')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "984cjkm4ai5n9p6mqua1ee69"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.535696')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '984cjkm4ai5n9p6mqua1ee69'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '984cjkm4ai5n9p6mqua1ee69' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.536876')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "gsay7rxq82k4w96p7s8maod2"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.538417')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'gsay7rxq82k4w96p7s8maod2'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'gsay7rxq82k4w96p7s8maod2' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.539471')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "gbq8x83k8usj91619nzx7a7x"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.540949')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'gbq8x83k8usj91619nzx7a7x'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'gbq8x83k8usj91619nzx7a7x' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.541980')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.543789')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "rqqg9ndg6xuz3din27grvdhm"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.545585')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'rqqg9ndg6xuz3din27grvdhm'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'rqqg9ndg6xuz3din27grvdhm' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.546683')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "52aovg5teqtgvyb6sjeebg9d"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.548397')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '52aovg5teqtgvyb6sjeebg9d'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '52aovg5teqtgvyb6sjeebg9d' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.549468')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "yfknxuawkk1l95vrnhsg0oqc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:38:58 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:38:53 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:38:53.550968')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yfknxuawkk1l95vrnhsg0oqc'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yfknxuawkk1l95vrnhsg0oqc' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:38:53.552016')[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.658190')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "1ugrr567kmwjge2cdirgtd1k"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.693127')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1ugrr567kmwjge2cdirgtd1k'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1ugrr567kmwjge2cdirgtd1k' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.698659')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "pr88a7qzlfke640teiw5ezrf"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.701008')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'pr88a7qzlfke640teiw5ezrf'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'pr88a7qzlfke640teiw5ezrf' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND "user_queues"."code" = 'pr88a7qzlfke640teiw5ezrf'
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.705971')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "1xb3wq20026ahcyr4xn44203"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.707935')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1xb3wq20026ahcyr4xn44203'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1xb3wq20026ahcyr4xn44203' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.709080')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "co22541iqrbuemxlv20rs098"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.711464')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'co22541iqrbuemxlv20rs098'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'co22541iqrbuemxlv20rs098' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.712669')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "rm3pip7rn6bb9rar01h7ce7n"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.714288')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'rm3pip7rn6bb9rar01h7ce7n'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'rm3pip7rn6bb9rar01h7ce7n' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.715453')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "3jjr0lhzrpacfexq0v4f9luo"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.717019')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '3jjr0lhzrpacfexq0v4f9luo'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '3jjr0lhzrpacfexq0v4f9luo' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.718120')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "kwf6l0efe6p5rslchgq5suoe"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.719684')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'kwf6l0efe6p5rslchgq5suoe'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'kwf6l0efe6p5rslchgq5suoe' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.720757')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.722655')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "wqtkgq0w2uwsqsswb7qiohyt"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.724458')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'wqtkgq0w2uwsqsswb7qiohyt'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'wqtkgq0w2uwsqsswb7qiohyt' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.725570')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "un741udykqn13yyp237u7gp2"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.727322')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'un741udykqn13yyp237u7gp2'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'un741udykqn13yyp237u7gp2' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.728404')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "m2zbo9q55vuc21gat3pp587q"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:40:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:40:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:40:11.729924')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'm2zbo9q55vuc21gat3pp587q'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'm2zbo9q55vuc21gat3pp587q' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:40:11.730999')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.862799')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "olb52u7hp2qjtfmcmmr0dpid"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.895180')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'olb52u7hp2qjtfmcmmr0dpid'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'olb52u7hp2qjtfmcmmr0dpid' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'olb52u7hp2qjtfmcmmr0dpid'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'olb52u7hp2qjtfmcmmr0dpid' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.901886')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "9obd7oogsjzgt7oc4dt48z33"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.904161')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '9obd7oogsjzgt7oc4dt48z33'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '9obd7oogsjzgt7oc4dt48z33' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '9obd7oogsjzgt7oc4dt48z33'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '9obd7oogsjzgt7oc4dt48z33' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.909571')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "l7gykhvmfvarrizhvxrtdprq"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.911435')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'l7gykhvmfvarrizhvxrtdprq'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'l7gykhvmfvarrizhvxrtdprq' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.912536')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "hiae9wdk6lllxucb3obnwtd9"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.915304')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hiae9wdk6lllxucb3obnwtd9'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hiae9wdk6lllxucb3obnwtd9' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.917324')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ieon82el2lz2gv2p0wri4i1u"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.919530')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ieon82el2lz2gv2p0wri4i1u'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ieon82el2lz2gv2p0wri4i1u' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.920806')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "y28eki679zhn9e7hynx7oisk"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.922680')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y28eki679zhn9e7hynx7oisk'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y28eki679zhn9e7hynx7oisk' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.924176')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "kifwff387ezi3550rbrgign9"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.926411')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'kifwff387ezi3550rbrgign9'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'kifwff387ezi3550rbrgign9' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.928369')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.930538')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "ugbpfr00py5dcgkxvp9qpl6o"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.5ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.934074')
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ugbpfr00py5dcgkxvp9qpl6o'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ugbpfr00py5dcgkxvp9qpl6o' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.937296')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "odi2yl7uuuzoti38to7h3frw"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.940329')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'odi2yl7uuuzoti38to7h3frw'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'odi2yl7uuuzoti38to7h3frw' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.942273')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "5x01sgllods3n9gmnncxy1f5"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:06 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:01 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:01.949083')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '5x01sgllods3n9gmnncxy1f5'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '5x01sgllods3n9gmnncxy1f5' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:01.950584')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:20.995613')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "mpyzmjp5049xlugg10ppym4s"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.028235')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'mpyzmjp5049xlugg10ppym4s'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'mpyzmjp5049xlugg10ppym4s' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'mpyzmjp5049xlugg10ppym4s'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'mpyzmjp5049xlugg10ppym4s' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.033457')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "64uq17lef68x9741rlarrws0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.035660')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '64uq17lef68x9741rlarrws0'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '64uq17lef68x9741rlarrws0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '64uq17lef68x9741rlarrws0'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '64uq17lef68x9741rlarrws0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.040779')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "1m1wgpw5j82it54wo1sb6f9z"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.042647')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1m1wgpw5j82it54wo1sb6f9z'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1m1wgpw5j82it54wo1sb6f9z' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.043745')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "mmvdrmdpebgw11ew8f1u03i2"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.046134')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'mmvdrmdpebgw11ew8f1u03i2'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'mmvdrmdpebgw11ew8f1u03i2' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.047313')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "b6qsevjvvwatzxr1c8reyyo2"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.048907')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'b6qsevjvvwatzxr1c8reyyo2'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'b6qsevjvvwatzxr1c8reyyo2' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.050041')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "slr7f07wa1kggy01yihy7rtx"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.051618')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'slr7f07wa1kggy01yihy7rtx'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'slr7f07wa1kggy01yihy7rtx' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.052697')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ywuwezhw1rsv0b9xci7o712j"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.054185')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ywuwezhw1rsv0b9xci7o712j'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ywuwezhw1rsv0b9xci7o712j' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.055231')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.057112')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "e6jivpjl9vu2onktc38m5v9z"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.058902')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'e6jivpjl9vu2onktc38m5v9z'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'e6jivpjl9vu2onktc38m5v9z' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.059985')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "tj29wbq08w58dtafbofa2a25"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.061746')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'tj29wbq08w58dtafbofa2a25'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'tj29wbq08w58dtafbofa2a25' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.062882')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "yf52o7hk6aqeo2mntqq4x8rx"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:26 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:21 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:21.064440')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yf52o7hk6aqeo2mntqq4x8rx'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yf52o7hk6aqeo2mntqq4x8rx' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:21.065475')[0m
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.447264')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "nyljxud6wsxn5kwlytpap3n8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.479453')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'nyljxud6wsxn5kwlytpap3n8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'nyljxud6wsxn5kwlytpap3n8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'nyljxud6wsxn5kwlytpap3n8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'nyljxud6wsxn5kwlytpap3n8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.484711')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "equl7z0imiuuq519qfymi7uq"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.487405')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'equl7z0imiuuq519qfymi7uq'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'equl7z0imiuuq519qfymi7uq' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'equl7z0imiuuq519qfymi7uq'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'equl7z0imiuuq519qfymi7uq' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.492007')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "k8k0fncqgyearvq1xa7g81hz"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.493911')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'k8k0fncqgyearvq1xa7g81hz'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'k8k0fncqgyearvq1xa7g81hz' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.495065')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "5yvb1ylhd2infkmgye6sllg4"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.497499')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '5yvb1ylhd2infkmgye6sllg4'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '5yvb1ylhd2infkmgye6sllg4' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.498674')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "y29z42rhc3wym9s47n2x0w3v"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.500372')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y29z42rhc3wym9s47n2x0w3v'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y29z42rhc3wym9s47n2x0w3v' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.501568')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "gpzeyd7xohyabfq7urp6ortb"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.503298')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'gpzeyd7xohyabfq7urp6ortb'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'gpzeyd7xohyabfq7urp6ortb' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.504378')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "58hxqio594bwbzod7tl0eyyr"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.505901')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '58hxqio594bwbzod7tl0eyyr'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '58hxqio594bwbzod7tl0eyyr' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.506989')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.508738')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "aidk8x6dnpsugpcwiczmqea8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.510569')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'aidk8x6dnpsugpcwiczmqea8'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'aidk8x6dnpsugpcwiczmqea8' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.511671')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "hx41ia0zbrblu1fywnapr4mg"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.513475')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hx41ia0zbrblu1fywnapr4mg'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hx41ia0zbrblu1fywnapr4mg' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.514557')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "z9i4lpd061fnmt0yhvor0fi0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:42:49 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:42:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:42:44.516097')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'z9i4lpd061fnmt0yhvor0fi0'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'z9i4lpd061fnmt0yhvor0fi0' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:42:44.517171')[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.198966')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "hzto2e6o2ls9ry01lf9iqdg8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.232801')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hzto2e6o2ls9ry01lf9iqdg8'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hzto2e6o2ls9ry01lf9iqdg8' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hzto2e6o2ls9ry01lf9iqdg8'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hzto2e6o2ls9ry01lf9iqdg8' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.238125')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "werqrhcv85eate59i0qnp6e6"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.240431')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'werqrhcv85eate59i0qnp6e6'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'werqrhcv85eate59i0qnp6e6' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'werqrhcv85eate59i0qnp6e6'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'werqrhcv85eate59i0qnp6e6' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.245152')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "gs3ilu0bejpjoid3o68jaytt"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.247021')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'gs3ilu0bejpjoid3o68jaytt'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'gs3ilu0bejpjoid3o68jaytt' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.248121')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "fvf0fcs5146btfbkbezj7yak"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.250503')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'fvf0fcs5146btfbkbezj7yak'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'fvf0fcs5146btfbkbezj7yak' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.251670')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "msazy1u9qzy26mot9w2k4ev4"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.253268')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'msazy1u9qzy26mot9w2k4ev4'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'msazy1u9qzy26mot9w2k4ev4' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.254323')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "v9xuapdclsth5hijjk02n743"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.255936')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'v9xuapdclsth5hijjk02n743'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'v9xuapdclsth5hijjk02n743' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.256988')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "8m0fo71hclklo1zvzhfbg51t"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.258458')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '8m0fo71hclklo1zvzhfbg51t'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '8m0fo71hclklo1zvzhfbg51t' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.259493')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.261246')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ep3ofanvxthe3seq00qzg1qe"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.263002')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ep3ofanvxthe3seq00qzg1qe'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ep3ofanvxthe3seq00qzg1qe' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.264071')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "2no1hmocfxnbrihfxhwrymh4"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.265814')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '2no1hmocfxnbrihfxhwrymh4'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '2no1hmocfxnbrihfxhwrymh4' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.266878')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "oxeet24f1hcoj3c0a5suxlmo"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:16 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:11 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:11.268359')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'oxeet24f1hcoj3c0a5suxlmo'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'oxeet24f1hcoj3c0a5suxlmo' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:11.269380')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.299791')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.303275')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "k5zcoac1tdvxgy3soo28zybd"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.332615')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'k5zcoac1tdvxgy3soo28zybd'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'k5zcoac1tdvxgy3soo28zybd' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.335475')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.341066')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "k79mdlbiohj8y68x1m8ltlib"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.343763')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'k79mdlbiohj8y68x1m8ltlib'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'k79mdlbiohj8y68x1m8ltlib' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'k79mdlbiohj8y68x1m8ltlib'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'k79mdlbiohj8y68x1m8ltlib' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.347088')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "va6pbezjs3h29bmny5ly4ggn"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.348937')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'va6pbezjs3h29bmny5ly4ggn'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'va6pbezjs3h29bmny5ly4ggn' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'va6pbezjs3h29bmny5ly4ggn'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'va6pbezjs3h29bmny5ly4ggn' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.352390')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "yt7tbtawk91us83ovo4omztj"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.354289')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yt7tbtawk91us83ovo4omztj'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yt7tbtawk91us83ovo4omztj' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.355430')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "4k6t7mk1gtjmfnfnaxv6wfa8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.357228')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '4k6t7mk1gtjmfnfnaxv6wfa8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '4k6t7mk1gtjmfnfnaxv6wfa8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.358333')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "byysed8qw0c8jvsta5dg8j2w"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.359872')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'byysed8qw0c8jvsta5dg8j2w'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'byysed8qw0c8jvsta5dg8j2w' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.360944')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "nu8yb85ertt21hwiisdt051u"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.362472')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'nu8yb85ertt21hwiisdt051u'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'nu8yb85ertt21hwiisdt051u' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.363551')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "a8ig4x5osaw709kie2t2xhuf"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.365153')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'a8ig4x5osaw709kie2t2xhuf'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'a8ig4x5osaw709kie2t2xhuf' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.366247')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.368043')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "va9u7fles3uqtt9q1xyjlm64"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.369837')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'va9u7fles3uqtt9q1xyjlm64'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'va9u7fles3uqtt9q1xyjlm64' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.370943')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "a0fswf9toce62qi937t8yn2p"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.372710')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'a0fswf9toce62qi937t8yn2p'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'a0fswf9toce62qi937t8yn2p' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.373808')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "onl4wk2m0su9zqhtzj9ozmuh"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:49:38 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:49:33 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:49:33.375490')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'onl4wk2m0su9zqhtzj9ozmuh'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'onl4wk2m0su9zqhtzj9ozmuh' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:49:33.376659')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.835782')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.855098')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "ijjx6ujmbz0k1x837qgmdf6x"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.870617')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ijjx6ujmbz0k1x837qgmdf6x'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ijjx6ujmbz0k1x837qgmdf6x' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.873435')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mUPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1[0m  [["expires_at", Mon, 23 Dec 2013 03:50:36 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.878569')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.881216')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "xwft6868r1il2tngtir0zpe6"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.883291')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xwft6868r1il2tngtir0zpe6'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xwft6868r1il2tngtir0zpe6' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xwft6868r1il2tngtir0zpe6'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xwft6868r1il2tngtir0zpe6' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.886560')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "zbfks6qskywhx6fluwusbai2"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.888373')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'zbfks6qskywhx6fluwusbai2'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'zbfks6qskywhx6fluwusbai2' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'zbfks6qskywhx6fluwusbai2'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'zbfks6qskywhx6fluwusbai2' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.891765')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "lwg5m6sygu1zl49lirtx75ap"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.893564')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'lwg5m6sygu1zl49lirtx75ap'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'lwg5m6sygu1zl49lirtx75ap' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.894766')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "f06j1ccigpuxj0n3rkczjujn"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.896552')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'f06j1ccigpuxj0n3rkczjujn'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'f06j1ccigpuxj0n3rkczjujn' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.897670')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "paip1caxnm45ggxw8p39hb73"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.899195')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'paip1caxnm45ggxw8p39hb73'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'paip1caxnm45ggxw8p39hb73' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.900257')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "s585g45qhxd2pm26jx5rze1q"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.901765')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 's585g45qhxd2pm26jx5rze1q'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 's585g45qhxd2pm26jx5rze1q' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.902818')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "mx8pl4nc1q8t1ravcwa5n6bh"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.904356')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'mx8pl4nc1q8t1ravcwa5n6bh'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'mx8pl4nc1q8t1ravcwa5n6bh' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.905425')
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.907130')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "wgd9zftjuyezvbuhfy02s3f3"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.908916')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'wgd9zftjuyezvbuhfy02s3f3'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'wgd9zftjuyezvbuhfy02s3f3' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.910012')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ow1gs24ir573szmgnj8btetx"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.911732')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ow1gs24ir573szmgnj8btetx'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ow1gs24ir573szmgnj8btetx' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.912813')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "q1hr42lus1cdmiymx678od2l"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 03:50:42 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 03:50:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 03:50:37.914341')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'q1hr42lus1cdmiymx678od2l'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'q1hr42lus1cdmiymx678od2l' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 03:50:37.915500')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.3ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.455941')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.476223')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (80.8ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "3kaynqzpqm699gaapu281hza"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.604789')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '3kaynqzpqm699gaapu281hza'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '3kaynqzpqm699gaapu281hza' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.608667')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mUPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1[0m  [["expires_at", Mon, 23 Dec 2013 13:56:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.613828')[0m
  [1m[35m (20.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.635892')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "v5dk1avmmav7wfvz8aww9mpx"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.638079')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'v5dk1avmmav7wfvz8aww9mpx'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'v5dk1avmmav7wfvz8aww9mpx' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'v5dk1avmmav7wfvz8aww9mpx'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'v5dk1avmmav7wfvz8aww9mpx' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (3.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.644705')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "y5sq5rh1d9g2fhuf71l7lk61"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.646768')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y5sq5rh1d9g2fhuf71l7lk61'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y5sq5rh1d9g2fhuf71l7lk61' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y5sq5rh1d9g2fhuf71l7lk61'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y5sq5rh1d9g2fhuf71l7lk61' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (106.8ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.756936')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "os3iqibh55v02thjayyzfe1b"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.758819')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'os3iqibh55v02thjayyzfe1b'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'os3iqibh55v02thjayyzfe1b' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.759929')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "tuotqz2046slg34p292w3rd8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.761661')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'tuotqz2046slg34p292w3rd8'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'tuotqz2046slg34p292w3rd8' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.762784')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "bq8x9dgfb3ldomz873ofgohl"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.764406')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'bq8x9dgfb3ldomz873ofgohl'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'bq8x9dgfb3ldomz873ofgohl' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.765466')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "tte3bgiul4grppfwq3haoihq"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.767128')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'tte3bgiul4grppfwq3haoihq'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'tte3bgiul4grppfwq3haoihq' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.768222')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "y0ej7clff2odfwfo48z24n65"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.769704')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y0ej7clff2odfwfo48z24n65'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y0ej7clff2odfwfo48z24n65' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.770740')
  [1m[36m (52.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.824894')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "jxov8rn533fnl3946bbe2bze"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.826772')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'jxov8rn533fnl3946bbe2bze'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'jxov8rn533fnl3946bbe2bze' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.827911')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "73aeeg5c0tx03ket8dggza1t"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.829702')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '73aeeg5c0tx03ket8dggza1t'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '73aeeg5c0tx03ket8dggza1t' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.830797')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "hlgybgg572ij88619blhh8wk"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 13:56:35 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 13:56:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 13:56:30.832321')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hlgybgg572ij88619blhh8wk'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hlgybgg572ij88619blhh8wk' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 13:56:30.833377')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.830305')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "82ghvmf48n3gsm60egbqzz1"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:18 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:08.862777')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '82ghvmf48n3gsm60egbqzz1'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '82ghvmf48n3gsm60egbqzz1' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.866385')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "8hdtgdwywsyv8i06003v3g2z"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:18 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:08.869909')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '8hdtgdwywsyv8i06003v3g2z'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '8hdtgdwywsyv8i06003v3g2z' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.871233')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "zb42aal1jvnud8uvu9wa17fg"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:18 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:08.872857')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'zb42aal1jvnud8uvu9wa17fg'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'zb42aal1jvnud8uvu9wa17fg' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.874560')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "6b95y4o9ufndfgjpdocak50n"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:18 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:08.876238')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6b95y4o9ufndfgjpdocak50n'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6b95y4o9ufndfgjpdocak50n' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.877338')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "l8j924mysyn3fwn2k0ip3lwl"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:18 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:08.878897')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'l8j924mysyn3fwn2k0ip3lwl'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'l8j924mysyn3fwn2k0ip3lwl' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:08.880057')
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.116496')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.117244')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "t98o6x7uruqxigtlg8v30v47"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.119740')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 't98o6x7uruqxigtlg8v30v47'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 't98o6x7uruqxigtlg8v30v47' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.121068')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1  [["expires_at", Mon, 23 Dec 2013 14:05:08 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.124864')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.126985')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "t6k0ctdam47hhudjnahqoi64"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.129099')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 't6k0ctdam47hhudjnahqoi64'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 't6k0ctdam47hhudjnahqoi64' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 't6k0ctdam47hhudjnahqoi64'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 't6k0ctdam47hhudjnahqoi64' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.132369')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "kz9jwh20u4jn35kpa6ta9y79"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.134257')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'kz9jwh20u4jn35kpa6ta9y79'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'kz9jwh20u4jn35kpa6ta9y79' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'kz9jwh20u4jn35kpa6ta9y79'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'kz9jwh20u4jn35kpa6ta9y79' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.138032')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "z43xws6w5a53gts6m7dwedds"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.139985')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'z43xws6w5a53gts6m7dwedds'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'z43xws6w5a53gts6m7dwedds' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.141122')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "klctlet74vwanenhju4m0vhy"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.142957')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'klctlet74vwanenhju4m0vhy'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'klctlet74vwanenhju4m0vhy' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.144109')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "xt0d8b3zx62dq0gvv9s7vi95"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.145715')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xt0d8b3zx62dq0gvv9s7vi95'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xt0d8b3zx62dq0gvv9s7vi95' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.147071')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "otzyrye1hzgmgm9mlsigppj8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.149228')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'otzyrye1hzgmgm9mlsigppj8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'otzyrye1hzgmgm9mlsigppj8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.150461')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "y465626nuwvwyqojfng8xdrv"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.152089')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y465626nuwvwyqojfng8xdrv'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y465626nuwvwyqojfng8xdrv' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.153227')[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.155483')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "6tl61huy0ag9y6nj4lfxicg8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.157851')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6tl61huy0ag9y6nj4lfxicg8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6tl61huy0ag9y6nj4lfxicg8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.159039')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "yic4byoi84gyl20f9ph5e68i"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.160878')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yic4byoi84gyl20f9ph5e68i'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yic4byoi84gyl20f9ph5e68i' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.162012')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "7gk2or03c7hbhns8rfhjqgc9"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:05:14 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:05:09 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:05:09.163594')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '7gk2or03c7hbhns8rfhjqgc9'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '7gk2or03c7hbhns8rfhjqgc9' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:05:09.165346')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.554982')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "t3v2s3wyyp630w93fvdj4woo"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:24 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.587306')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 't3v2s3wyyp630w93fvdj4woo'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 't3v2s3wyyp630w93fvdj4woo' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.591182')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "q8mdykl3j1i9q8hya4bv1w0o"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:24 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.594526')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'q8mdykl3j1i9q8hya4bv1w0o'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'q8mdykl3j1i9q8hya4bv1w0o' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.595847')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "frcahvb0ehpc9ua4rwztvwyn"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:24 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.597554')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'frcahvb0ehpc9ua4rwztvwyn'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'frcahvb0ehpc9ua4rwztvwyn' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.598656')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "uhjk96lbfkdmnwkznkrev7ud"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:24 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.600186')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'uhjk96lbfkdmnwkznkrev7ud'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'uhjk96lbfkdmnwkznkrev7ud' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.601236')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "rg83mc7bseqxan8y5cq72etc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:24 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.602740')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'rg83mc7bseqxan8y5cq72etc'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'rg83mc7bseqxan8y5cq72etc' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.603893')
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.608958')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "yynd5ql62ktrf7eudd84t99a"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:08:44 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.610926')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'yynd5ql62ktrf7eudd84t99a'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'yynd5ql62ktrf7eudd84t99a' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.612104')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "20cyp2gbhljrzyhx352x5l5x"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:08:44 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.613668')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '20cyp2gbhljrzyhx352x5l5x'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '20cyp2gbhljrzyhx352x5l5x' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.614716')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "6sji8v9pzhy9t4c3wq6botjc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:08:44 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.616233')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6sji8v9pzhy9t4c3wq6botjc'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6sji8v9pzhy9t4c3wq6botjc' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.617287')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "ehijtbg82v38kfn37yjd8zey"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:08:44 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.618786')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ehijtbg82v38kfn37yjd8zey'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ehijtbg82v38kfn37yjd8zey' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.619828')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "p4f21ahbhrwr0czjao1xquh3"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:08:44 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.621323')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'p4f21ahbhrwr0czjao1xquh3'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'p4f21ahbhrwr0czjao1xquh3' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.626939')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.627529')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "87yoaes41m4hk4hs32uqpl0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.629639')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '87yoaes41m4hk4hs32uqpl0'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '87yoaes41m4hk4hs32uqpl0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.630880')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1  [["expires_at", Mon, 23 Dec 2013 14:06:13 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.634395')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.636744')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "tqm7a6hbq60bqjyrv5mg5gs0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.639174')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'tqm7a6hbq60bqjyrv5mg5gs0'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'tqm7a6hbq60bqjyrv5mg5gs0' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'tqm7a6hbq60bqjyrv5mg5gs0'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'tqm7a6hbq60bqjyrv5mg5gs0' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.642365')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "l1e9yc02ntslzlhun3jdc3sc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.644192')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'l1e9yc02ntslzlhun3jdc3sc'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'l1e9yc02ntslzlhun3jdc3sc' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'l1e9yc02ntslzlhun3jdc3sc'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'l1e9yc02ntslzlhun3jdc3sc' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.647700')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "trvzya477dsh8kupo8r5h4du"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.649521')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'trvzya477dsh8kupo8r5h4du'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'trvzya477dsh8kupo8r5h4du' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.650607')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "r21mtiyf70xyciqzsujf5ssc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.652367')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'r21mtiyf70xyciqzsujf5ssc'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'r21mtiyf70xyciqzsujf5ssc' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.653442')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "e0oudesk2e9ku8t79om58yr5"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.654961')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'e0oudesk2e9ku8t79om58yr5'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'e0oudesk2e9ku8t79om58yr5' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.656072')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "1gqwqqmq63w4dc43bisn6wz9"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.657736')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1gqwqqmq63w4dc43bisn6wz9'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1gqwqqmq63w4dc43bisn6wz9' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.658835')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "8ll6fh6mef22qis6uv768j48"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.660540')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '8ll6fh6mef22qis6uv768j48'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '8ll6fh6mef22qis6uv768j48' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.661652')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.663399')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "hi99kp5d494pkaj24ssc3ijc"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.665154')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'hi99kp5d494pkaj24ssc3ijc'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'hi99kp5d494pkaj24ssc3ijc' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.666263')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "1t8qnkl0jeddnkujo4q9otul"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.668029')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1t8qnkl0jeddnkujo4q9otul'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1t8qnkl0jeddnkujo4q9otul' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.669103')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "10k33t0qokurtuoyn0qk31c0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 14:06:19 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 14:06:14 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 14:06:14.670717')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '10k33t0qokurtuoyn0qk31c0'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '10k33t0qokurtuoyn0qk31c0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 14:06:14.672164')
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.3ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.613307')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (69.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "f54s9qkjzx786lxeiyl44rso"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:34 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.749519')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'f54s9qkjzx786lxeiyl44rso'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'f54s9qkjzx786lxeiyl44rso' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.752370')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "9yd4zewu5q9xufv236vyekbk"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:34 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.755477')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '9yd4zewu5q9xufv236vyekbk'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '9yd4zewu5q9xufv236vyekbk' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.756757')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "6gwctveotwt04zpianuoinx0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:34 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.758361')[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6gwctveotwt04zpianuoinx0'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6gwctveotwt04zpianuoinx0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.760092')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "ywfkcapkh3x7l4lwxbhlo9wp"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:34 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.761806')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ywfkcapkh3x7l4lwxbhlo9wp'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ywfkcapkh3x7l4lwxbhlo9wp' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.762898')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "rvlnxfufnnjl06ugmsyeu7w8"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:34 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.764413')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'rvlnxfufnnjl06ugmsyeu7w8'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'rvlnxfufnnjl06ugmsyeu7w8' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.765521')
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 2]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.0ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 4]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.0ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.770763')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "xnoo3byps0lmflzb50jh8ycf"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:03:54 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.772789')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xnoo3byps0lmflzb50jh8ycf'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xnoo3byps0lmflzb50jh8ycf' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.773963')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "aam6lgaoosf3r9eiej00h72f"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:03:54 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.775540')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'aam6lgaoosf3r9eiej00h72f'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'aam6lgaoosf3r9eiej00h72f' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.776641')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "c5vcifine1i6g4tm2171o23z"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:03:54 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.778163')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'c5vcifine1i6g4tm2171o23z'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'c5vcifine1i6g4tm2171o23z' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.779239')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "xgr7b8ktswhf0dm1lfyowrsx"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:03:54 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.780817')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xgr7b8ktswhf0dm1lfyowrsx'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xgr7b8ktswhf0dm1lfyowrsx' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.781893')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "6eyxo6fghn0938rppve9otex"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:03:54 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.783756')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6eyxo6fghn0938rppve9otex'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6eyxo6fghn0938rppve9otex' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.789219')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.789813')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "sfzz49cy0doxbcmdt81b3ilm"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.791918')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'sfzz49cy0doxbcmdt81b3ilm'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'sfzz49cy0doxbcmdt81b3ilm' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.793124')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1  [["expires_at", Mon, 23 Dec 2013 16:01:23 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.796509')
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.798751')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "seflmakvhgqdk37ncg7220e0"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.800824')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'seflmakvhgqdk37ncg7220e0'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'seflmakvhgqdk37ncg7220e0' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'seflmakvhgqdk37ncg7220e0'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'seflmakvhgqdk37ncg7220e0' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.804001')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "ia3oplojr78exe27ae87pa4m"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.805862')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ia3oplojr78exe27ae87pa4m'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ia3oplojr78exe27ae87pa4m' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ia3oplojr78exe27ae87pa4m'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ia3oplojr78exe27ae87pa4m' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.809399')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "xsikbtoe8evfstrbu806fx4g"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.811244')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'xsikbtoe8evfstrbu806fx4g'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'xsikbtoe8evfstrbu806fx4g' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.812347')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "mmjpksy3p6qn26c5o1742w5h"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.814105')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'mmjpksy3p6qn26c5o1742w5h'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'mmjpksy3p6qn26c5o1742w5h' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.815190')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "6awk4zgrv0uphar6ro3nkl7c"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.816874')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '6awk4zgrv0uphar6ro3nkl7c'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '6awk4zgrv0uphar6ro3nkl7c' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.818070')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "l63vfugzut7lk5o3cqzoamca"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.819737')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'l63vfugzut7lk5o3cqzoamca'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'l63vfugzut7lk5o3cqzoamca' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.820808')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "y3wrvnm0bc5jnb4qvkvyn10z"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.822697')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'y3wrvnm0bc5jnb4qvkvyn10z'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'y3wrvnm0bc5jnb4qvkvyn10z' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.823905')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.825773')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "w4fwakvtc1el1o4l0x46es"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.827624')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'w4fwakvtc1el1o4l0x46es'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'w4fwakvtc1el1o4l0x46es' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.828778')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "pebs75r32pus1fax1kb341sl"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.830717')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'pebs75r32pus1fax1kb341sl'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'pebs75r32pus1fax1kb341sl' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.831828')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "3yishr5ujb71fb2sszbb80fd"], ["context", "test"], ["created_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00], ["data", "{}"], ["expires_at", Mon, 23 Dec 2013 16:01:29 UTC +00:00], ["updated_at", Mon, 23 Dec 2013 16:01:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-23 16:01:24.833370')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '3yishr5ujb71fb2sszbb80fd'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '3yishr5ujb71fb2sszbb80fd' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-23 16:01:24.834437')
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserqTest: test_insert_and_collect_custom_data
----------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserqTest: test_insert_and_collect_custom_data
----------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
----------------------------------------------
UserqTest: test_insert_and_collect_custom_data
----------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.0ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
SQLite3::SQLException: no such table: user_queues: SELECT "user_queues".* FROM "user_queues"  WHERE "user_queues"."context" = 'test'
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36m (1.5ms)[0m  [1mCREATE TABLE "user_queues" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "code" varchar(255), "expires_at" datetime, "data" text, "context" varchar(255), "created_at" datetime, "updated_at" datetime) [0m
  [1m[35m (1.9ms)[0m  CREATE TABLE "schema_migrations" ("version" varchar(255) NOT NULL) 
  [1m[36m (1.1ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35m (0.1ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (1.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('1387972460')[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------
UserqTest: test_average_wait_time_should_be_rightly_calculated
--------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.416774')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (4.6ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "fi19epvxf2arauctscets0dk"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:34 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.456901')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'fi19epvxf2arauctscets0dk'
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'fi19epvxf2arauctscets0dk' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.461260')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "rgegl2egj87wwe3ud1tn01de"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:34 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.466012')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'rgegl2egj87wwe3ud1tn01de'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'rgegl2egj87wwe3ud1tn01de' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.467656')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "f5gtagqij01an73d0qessz5t"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:34 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.469394')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'f5gtagqij01an73d0qessz5t'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'f5gtagqij01an73d0qessz5t' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.470542')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "nnncqtu1d1c18n7foqpei4tv"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:34 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.472185')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'nnncqtu1d1c18n7foqpei4tv'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'nnncqtu1d1c18n7foqpei4tv' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.473332')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ux3q1pid7i07slw44sp2tft0"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:34 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.475038')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ux3q1pid7i07slw44sp2tft0'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ux3q1pid7i07slw44sp2tft0' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.476184')
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "user_queues" WHERE "user_queues"."id" = ?  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "user_queues" WHERE "user_queues"."id" = ?[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.484860')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "23jp5wofgll4cf8fpx96qpg3"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:59:54 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.487275')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '23jp5wofgll4cf8fpx96qpg3'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '23jp5wofgll4cf8fpx96qpg3' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.488597')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "wjztygc6u7d8fp0n2qxneqe"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:59:54 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.491015')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'wjztygc6u7d8fp0n2qxneqe'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'wjztygc6u7d8fp0n2qxneqe' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.492883')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ogf3myxbw9m57iyc2vqnx3v3"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:59:54 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.495324')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ogf3myxbw9m57iyc2vqnx3v3'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ogf3myxbw9m57iyc2vqnx3v3' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.496484')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "2ivfphdc72sx2gf8wioah2w9"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:59:54 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.498954')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '2ivfphdc72sx2gf8wioah2w9'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '2ivfphdc72sx2gf8wioah2w9' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.500801')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "fje0qa0c51w2663n2jrmw07e"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:59:54 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.503534')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'fje0qa0c51w2663n2jrmw07e'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'fje0qa0c51w2663n2jrmw07e' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' ORDER BY "user_queues"."expires_at" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------
UserqTest: test_if_modules_are_available
----------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------
UserqTest: test_insert_and_collect_custom_data
----------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.509992')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "kaakyecqhdwd635kr5xh8xwn"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{\"name\":\"John Smith\"}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.513777')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'kaakyecqhdwd635kr5xh8xwn'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'kaakyecqhdwd635kr5xh8xwn' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------
UserqTest: test_migration_should_exist
--------------------------------------
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
----------------------------------------------------------------------------
UserqTest: test_queue_should_be_closed_and_then_re-opened_after_time_expires
----------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.518141')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.518714')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "9z3k8taoimh6knvxujeuy03h"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.520900')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '9z3k8taoimh6knvxujeuy03h'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '9z3k8taoimh6knvxujeuy03h' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.522118')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  UPDATE "user_queues" SET "expires_at" = ?, "updated_at" = ? WHERE "user_queues"."id" = 1  [["expires_at", Wed, 25 Dec 2013 11:57:23 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.526006')
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------------------------------------
UserqTest: test_should_NOT_be_able_to_access_existing_entry_under_different_context
-----------------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.528860')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "m4ok1caxis12dpxnrlqiao5v"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.531682')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'm4ok1caxis12dpxnrlqiao5v'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'm4ok1caxis12dpxnrlqiao5v' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'm4ok1caxis12dpxnrlqiao5v'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'm4ok1caxis12dpxnrlqiao5v' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
--------------------------------------------------------------------------
UserqTest: test_should_be_able_to_access_existing_entry_under_same_context
--------------------------------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.2ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.535388')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "wwrraz9inwntzppli7jzb56"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.538449')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'wwrraz9inwntzppli7jzb56'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'wwrraz9inwntzppli7jzb56' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'wwrraz9inwntzppli7jzb56'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'wwrraz9inwntzppli7jzb56' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
------------------------------------------------------------
UserqTest: test_should_be_able_to_create_instance_of_a_queue
------------------------------------------------------------
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
-----------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests
-----------------------------------------------------
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.543290')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "age2z5ug6er9v0qrlf1212nk"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.545389')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'age2z5ug6er9v0qrlf1212nk'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'age2z5ug6er9v0qrlf1212nk' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.546573')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "ogomvigoboqj0s5cyldbe7qv"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.548693')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'ogomvigoboqj0s5cyldbe7qv'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'ogomvigoboqj0s5cyldbe7qv' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.549899')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "1154f2qgua3hogcr7z8fljvv"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.551952')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '1154f2qgua3hogcr7z8fljvv'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '1154f2qgua3hogcr7z8fljvv' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.553812')[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "c5y4ly2f1fputgvwrk7ilwt2"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.555934')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'c5y4ly2f1fputgvwrk7ilwt2'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'c5y4ly2f1fputgvwrk7ilwt2' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.557105')
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "77g6fyb96u66iwd9pry1fihg"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.558703')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = '77g6fyb96u66iwd9pry1fihg'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = '77g6fyb96u66iwd9pry1fihg' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.559857')[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
--------------------------------------------------------------------------
UserqTest: test_should_not_allow_more_than_5_requests_with_2_already_taken
--------------------------------------------------------------------------
  [1m[35mUserQ::UserQueue Load (0.2ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test'
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.562081')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "dfzyllmjnxk8bsz4ycujdg0d"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.565113')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'dfzyllmjnxk8bsz4ycujdg0d'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'dfzyllmjnxk8bsz4ycujdg0d' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.566983')
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["code", "b41oelwi0vse1i5u9ndk5nru"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.570007')
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'b41oelwi0vse1i5u9ndk5nru'[0m
  [1m[35mUserQ::UserQueue Load (0.1ms)[0m  SELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'b41oelwi0vse1i5u9ndk5nru' ORDER BY "user_queues"."id" ASC LIMIT 1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.572027')[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "user_queues" ("code", "context", "created_at", "data", "expires_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["code", "a5h7n1yj1xzkzsbrip4qav71"], ["context", "test"], ["created_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00], ["data", "{}"], ["expires_at", Wed, 25 Dec 2013 11:57:29 UTC +00:00], ["updated_at", Wed, 25 Dec 2013 11:57:24 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at <= '2013-12-25 11:57:24.574770')[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."code" = 'a5h7n1yj1xzkzsbrip4qav71'
  [1m[36mUserQ::UserQueue Load (0.1ms)[0m  [1mSELECT "user_queues".* FROM "user_queues" WHERE "user_queues"."code" = 'a5h7n1yj1xzkzsbrip4qav71' ORDER BY "user_queues"."id" ASC LIMIT 1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "user_queues" WHERE "user_queues"."context" = 'test' AND (expires_at > '2013-12-25 11:57:24.576609')
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
